const icons = [
  {
    "pathID": "bing_light",
    "darkMode": "bing_dark",
    "friendlyName": "Bing",
    "firstSeen": "2019",
    "hasAlts": "0"
  },
  {
    "pathID": "calculator",
    "darkMode": "no",
    "friendlyName": "Calculator",
    "firstSeen": "10X",
    "hasAlts": "1"
  },
  {
    "pathID": "calendar",
    "darkMode": "no",
    "friendlyName": "Calendar",
    "firstSeen": "10X",
    "hasAlts": "2"
  },
  {
    "pathID": "camera",
    "darkMode": "no",
    "friendlyName": "Camera",
    "firstSeen": "10",
    "hasAlts": "1"
  },
  {
    "pathID": "clipchamp",
    "darkMode": "no",
    "friendlyName": "ClipChamp",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "clock",
    "darkMode": "no",
    "friendlyName": "Clock",
    "firstSeen": "10X",
    "hasAlts": "0"
  },
  {
    "pathID": "companyportal",
    "darkMode": "no",
    "friendlyName": "Company Portal",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "dynamics365layout",
    "darkMode": "no",
    "friendlyName": "Dynamics 365 Layout",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "familysafetymonitor",
    "darkMode": "no",
    "friendlyName": "Family Safety Monitor",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "feedbackhub",
    "darkMode": "no",
    "friendlyName": "Feedback Hub",
    "firstSeen": "10X",
    "hasAlts": "1"
  },
  {
    "pathID": "explorer",
    "darkMode": "no",
    "friendlyName": "File Explorer",
    "firstSeen": "11",
    "hasAlts": "3"
  },
  {
    "pathID": "gethelp",
    "darkMode": "no",
    "friendlyName": "Get Help",
    "firstSeen": "10X",
    "hasAlts": "0"
  },
  {
    "pathID": "getstarted",
    "darkMode": "no",
    "friendlyName": "Get Started",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "journal",
    "darkMode": "no",
    "friendlyName": "Journal",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "livecaptions",
    "darkMode": "no",
    "friendlyName": "Live Captions",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "magnify",
    "darkMode": "no",
    "friendlyName": "Magnifier",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "mail",
    "darkMode": "no",
    "friendlyName": "Mail",
    "firstSeen": "10X",
    "hasAlts": "2"
  },
  {
    "pathID": "maps",
    "darkMode": "no",
    "friendlyName": "Maps",
    "firstSeen": "10X",
    "hasAlts": "0"
  },
  {
    "pathID": "mediaplayer",
    "darkMode": "no",
    "friendlyName": "Media Player",
    "firstSeen": "11",
    "hasAlts": "2"
  },
  {
    "pathID": "messaging",
    "darkMode": "no",
    "friendlyName": "Messaging",
    "firstSeen": "10X",
    "hasAlts": "1"
  },
  {
    "pathID": "microsoftnews",
    "darkMode": "no",
    "friendlyName": "Microsoft News",
    "firstSeen": "10X",
    "hasAlts": "1"
  },
  {
    "pathID": "store_light",
    "darkMode": "store_dark",
    "friendlyName": "Microsoft Store",
    "firstSeen": "11",
    "hasAlts": "1"
  },
  {
    "pathID": "microsoftmaquette",
    "darkMode": "no",
    "friendlyName": "Microsoft Maquette",
    "firstSeen": "10",
    "hasAlts": "0"
  },
  {
    "pathID": "microsofttodo",
    "darkMode": "no",
    "friendlyName": "Microsoft To Do",
    "firstSeen": "10",
    "hasAlts": "0"
  },
  {
    "pathID": "microsoftedge",
    "darkMode": "no",
    "friendlyName": "Microsoft Edge",
    "firstSeen": "2019",
    "hasAlts": "0"
  },
  {
    "pathID": "microsoftemulator",
    "darkMode": "no",
    "friendlyName": "Microsoft Emulator",
    "firstSeen": "10",
    "hasAlts": "0"
  },
  {
    "pathID": "whiteboard",
    "darkMode": "no",
    "friendlyName": "Microsoft Whiteboard",
    "firstSeen": "10X",
    "hasAlts": "1"
  },
  {
    "pathID": "mixedrealityportal",
    "darkMode": "no",
    "friendlyName": "Mixed Reality Portal",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "moviesandtv",
    "darkMode": "no",
    "friendlyName": "Movies & TV",
    "firstSeen": "10",
    "hasAlts": "2"
  },
  {
    "pathID": "narrator",
    "darkMode": "no",
    "friendlyName": "Narrator",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "notepad",
    "darkMode": "no",
    "friendlyName": "Notepad",
    "firstSeen": "10X",
    "hasAlts": "0"
  },
  {
    "pathID": "office",
    "darkMode": "no",
    "friendlyName": "Office",
    "firstSeen": "2018",
    "hasAlts": "0"
  },
  {
    "pathID": "osk",
    "darkMode": "no",
    "friendlyName": "On-Screen Keyboard",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "d3dmapping",
    "darkMode": "no",
    "friendlyName": "OpenCL™ and OpenGL® Compatibility Pack",
    "firstSeen": "10",
    "hasAlts": "0"
  },
  {
    "pathID": "paint",
    "darkMode": "no",
    "friendlyName": "Paint",
    "firstSeen": "10X",
    "hasAlts": "0"
  },
  {
    "pathID": "paint3d",
    "darkMode": "no",
    "friendlyName": "Paint 3D",
    "firstSeen": "10X",
    "hasAlts": "0"
  },
  {
    "pathID": "people",
    "darkMode": "no",
    "friendlyName": "People",
    "firstSeen": "10X",
    "hasAlts": "1"
  },
  {
    "pathID": "phonelink",
    "darkMode": "no",
    "friendlyName": "Phone Link",
    "firstSeen": "10",
    "hasAlts": "1"
  },
  {
    "pathID": "photos",
    "darkMode": "no",
    "friendlyName": "Photos",
    "firstSeen": "10X",
    "hasAlts": "3"
  },
  {
    "pathID": "powerautomate",
    "darkMode": "no",
    "friendlyName": "Power Automate",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "powerbidesktop",
    "darkMode": "no",
    "friendlyName": "Power BI Desktop",
    "firstSeen": "10",
    "hasAlts": "0"
  },
  {
    "pathID": "powertoys",
    "darkMode": "no",
    "friendlyName": "PowerToys",
    "firstSeen": "10",
    "hasAlts": "0"
  },
  {
    "pathID": "printqueueactioncenter",
    "darkMode": "no",
    "friendlyName": "Print Management",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "quickassist",
    "darkMode": "no",
    "friendlyName": "Quick Assist",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "reactnativegallery",
    "darkMode": "no",
    "friendlyName": "React Native Gallery",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "remotedesktop",
    "darkMode": "no",
    "friendlyName": "Remote Desktop Connection",
    "firstSeen": "10",
    "hasAlts": "0"
  },
  {
    "pathID": "settings",
    "darkMode": "no",
    "friendlyName": "Settings",
    "firstSeen": "10X",
    "hasAlts": "1"
  },
  {
    "pathID": "snippingtool",
    "darkMode": "no",
    "friendlyName": "Snipping Tool",
    "firstSeen": "11",
    "hasAlts": "1"
  },
  {
    "pathID": "solitarecollection",
    "darkMode": "no",
    "friendlyName": "Solitare Collection",
    "firstSeen": "10X",
    "hasAlts": "0"
  },
  {
    "pathID": "stickynotes_light",
    "darkMode": "stickynotes_dark",
    "friendlyName": "Sticky Notes",
    "firstSeen": "10X",
    "hasAlts": "0"
  },
  {
    "pathID": "surface",
    "darkMode": "no",
    "friendlyName": "Surface",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "sysinternalssuite",
    "darkMode": "no",
    "friendlyName": "Sysinternals Suite",
    "firstSeen": "95",
    "hasAlts": "0"
  },
  {
    "pathID": "teams",
    "darkMode": "no",
    "friendlyName": "Teams",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "terminal",
    "darkMode": "no",
    "friendlyName": "Terminal",
    "firstSeen": "10",
    "hasAlts": "0"
  },
  {
    "pathID": "tips",
    "darkMode": "no",
    "friendlyName": "Tips",
    "firstSeen": "10X",
    "hasAlts": "0"
  },
  {
    "pathID": "videoeditor",
    "darkMode": "no",
    "friendlyName": "Video Editor",
    "firstSeen": "10",
    "hasAlts": "0"
  },
  {
    "pathID": "voiceaccess",
    "darkMode": "no",
    "friendlyName": "Voice Access",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "voicerecorder",
    "darkMode": "no",
    "friendlyName": "Voice Recorder",
    "firstSeen": "10X",
    "hasAlts": "0"
  },
  {
    "pathID": "warehousemanagement",
    "darkMode": "no",
    "friendlyName": "Warehouse Management",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "weather",
    "darkMode": "no",
    "friendlyName": "Weather",
    "firstSeen": "10X",
    "hasAlts": "0"
  },
  {
    "pathID": "windows365",
    "darkMode": "no",
    "friendlyName": "Windows 365",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "windowssecurity",
    "darkMode": "no",
    "friendlyName": "Windows Security",
    "firstSeen": "10X",
    "hasAlts": "0"
  },
  {
    "pathID": "linuxsubsystem",
    "darkMode": "no",
    "friendlyName": "Windows Subsystem for Linux Preview",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "winfr",
    "darkMode": "no",
    "friendlyName": "Windows File Recovery",
    "firstSeen": "10",
    "hasAlts": "0"
  },
  {
    "pathID": "winuigallery",
    "darkMode": "no",
    "friendlyName": "WinUI 2/3 Gallery",
    "firstSeen": "10",
    "hasAlts": "0"
  },
  {
    "pathID": "windowstools",
    "darkMode": "no",
    "friendlyName": "Windows Tools (Control Panel)",
    "firstSeen": "11",
    "hasAlts": "0"
  },
  {
    "pathID": "xboxgamebar",
    "darkMode": "no",
    "friendlyName": "Xbox Game Bar",
    "firstSeen": "11",
    "hasAlts": "0"
  }
]

var indxAmt = icons.length;
var gt = document.getElementById('gt');
gt.innerText = indxAmt;
var previewBox = document.getElementById('lrgPrev');
var darkToggle = document.getElementById('darkToggle');

var altContainer = document.getElementById('altBox');
var allAlts = document.querySelectorAll('.alt');
var ac1 = document.getElementById('alt1');
var ac2 = document.getElementById('alt2');
var ac3 = document.getElementById('alt3');
var ac4 = document.getElementById('alt4');
var ac5 = document.getElementById('alt5');

var gridBox = document.getElementById('gridSub'),
  iconBox = document.getElementById('button'),
  infoBox = document.getElementById('iconInfoContent'),
  clone;

icons.forEach(function (iconInd, index) {
  clone = iconBox.cloneNode();
  clone.setAttribute('style', 'background-image: url("iconimgs/' + iconInd["pathID"] + '.png")');
  clone.setAttribute('data-iconName', iconInd["friendlyName"]);
  clone.setAttribute('data-darkMode', iconInd["darkMode"]);
  clone.setAttribute('data-hasAlts', iconInd['hasAlts']);
  gridBox.appendChild(clone);

  allAlts.forEach(function (altIcn) {
    altIcn.onclick = function (x) {
      previewBox.setAttribute('altShowing', "y");
      localStorage.setItem('currentIcon', previewBox.style.backgroundImage);
      previewBox.style.backgroundImage = altIcn.style.backgroundImage;
      altIcn.style.backgroundImage = localStorage.getItem('currentIcon');
      // alert(localStorage.getItem('currentIcon') + " " + previewBox.getAttribute('altShowing'));
    }
  })

  clone.onclick = function () {
    previewBox.setAttribute('style', 'background-image: url("iconimgs/' + iconInd["pathID"] + '.png")');
    localStorage.setItem('lightImg', 'background-image: url("iconimgs/' + iconInd["pathID"] + '.png")');
    localStorage.setItem('darkImg', 'background-image: url("iconimgs/' + iconInd["darkMode"] + '.png")');
    previewBox.setAttribute('data-iconName', iconInd["friendlyName"]);
    lpLabel.innerText = iconInd["friendlyName"];
    previewBox.setAttribute('data-darkMode', clone.getAttribute('data-darkMode'));

    document.getElementById('moreIconName').innerText = iconInd["friendlyName"];
    document.getElementById('moreAltAmt').innerText = iconInd['hasAlts'] + " revision(s)"
    document.getElementById('moreFirstSeen').innerText = "First seen: " + iconInd['firstSeen'];

    moreBtn.style.display = "flex";

    var ccResult = iconInd['pathID'];
    var convResult = ccResult.replace(/([A-Z])/g, " $1");
    var finalResult = convResult.charAt(0).toUpperCase() + convResult.slice(1);

    ac1.style.backgroundImage = 'url("iconimgs/alt/' + iconInd["pathID"] + '_v1.png")';
    ac1.setAttribute('data-altTooltip', finalResult);
    ac2.style.backgroundImage = 'url("iconimgs/alt/' + iconInd["pathID"] + '_v2.png")';
    ac2.setAttribute('data-altTooltip', finalResult);
    ac3.style.backgroundImage = 'url("iconimgs/alt/' + iconInd["pathID"] + '_v3.png")';
    ac3.setAttribute('data-altTooltip', finalResult);
    ac4.style.backgroundImage = 'url("iconimgs/alt/' + iconInd["pathID"] + '_v4.png")';
    ac4.setAttribute('data-altTooltip', finalResult);
    ac5.style.backgroundImage = 'url("iconimgs/alt/' + iconInd["pathID"] + '_v5.png")';
    ac5.setAttribute('data-altTooltip', finalResult);

    if (iconInd['hasAlts'] === "1") {
      altContainer.style.display = "flex";
      ac1.style.display = "flex";
      ac2.style.display = "none";
      ac3.style.display = "none";
      ac4.style.display = "none";
      ac5.style.display = "none";
      document.getElementById('moreAltAmt').style.display = "flex";
      document.getElementById('altBox').style.display = "flex";
    } else if (iconInd['hasAlts'] === "2") {
      altContainer.style.display = "flex";
      ac1.style.display = "flex";
      ac2.style.display = "flex";
      ac3.style.display = "none";
      ac4.style.display = "none";
      ac5.style.display = "none";
      document.getElementById('moreAltAmt').style.display = "flex";
      document.getElementById('altBox').style.display = "flex";
    } else if (iconInd['hasAlts'] === "3") {
      altContainer.style.display = "flex";
      ac1.style.display = "flex";
      ac2.style.display = "flex";
      ac3.style.display = "flex";
      ac4.style.display = "none";
      ac5.style.display = "none";
      document.getElementById('moreAltAmt').style.display = "flex";
      document.getElementById('altBox').style.display = "flex";
    } else if (iconInd['hasAlts'] === "4") {
      altContainer.style.display = "flex";
      ac1.style.display = "flex";
      ac2.style.display = "flex";
      ac3.style.display = "flex";
      ac4.style.display = "flex";
      ac5.style.display = "none";
      document.getElementById('moreAltAmt').style.display = "flex";
      document.getElementById('altBox').style.display = "flex";
    } else if (iconInd['hasAlts'] === "5") {
      altContainer.style.display = "flex";
      ac1.style.display = "flex";
      ac2.style.display = "flex";
      ac3.style.display = "flex";
      ac4.style.display = "flex";
      ac5.style.display = "flex";
      document.getElementById('moreAltAmt').style.display = "flex";
      document.getElementById('altBox').style.display = "flex";
    } else if (iconInd['hasAlts'] === "0") {
      altContainer.style.display = "none";
      ac1.style.display = "none";
      ac2.style.display = "none";
      ac3.style.display = "none";
      ac4.style.display = "none";
      ac5.style.display = "none";
      document.getElementById('moreAltAmt').style.display = "none";
      document.getElementById('altBox').style.display = "none";
    }

    if (iconInd['darkMode'] === "no") {
      darkToggle.style.display = "none";
      document.getElementById('moreIconClrMd').style.display = "none";
      document.getElementById('moreIconClrMd').innerText = "Light";
    } else {
      darkToggle.style.display = "flex";
      document.getElementById('moreIconClrMd').style.display = "flex";
    }
  };

  var showDarkIcon = false;

  darkToggle.onclick = function () {
    previewBox.setAttribute('data-showDarkIcon', showDarkIcon);
    showDarkIcon = !showDarkIcon;

    if (showDarkIcon == true) {
      previewBox.setAttribute('style', localStorage.getItem('darkImg'));
      document.getElementById('moreIconClrMd').innerText = "Dark";
    } else {
      previewBox.setAttribute('style', localStorage.getItem('lightImg'));
      document.getElementById('moreIconClrMd').innerText = "Light";
    }
  }

});

// Selected icon indication

window.onclick = (e) => {
  if (e.target.classList.contains('button')) {
    const active = document.querySelector('.selected');
    if (active) {
      active.classList.remove('selected');
    }
    e.target.classList.add('selected');
  }
}

// More info btn & menu
var moreBtn = document.getElementById('moreInfoBtn');
var moreMenu = document.getElementById('iconInfo');

moreBtn.onclick = function () {
  if (moreMenu.getAttribute('data-menuShowing') == "n") {
    moreBtn.innerHTML = '<i class="fa-solid fa-close"></i>'
    moreMenu.style.opacity = "1";
    moreMenu.style.zIndex = "10";
    moreMenu.style.paddingBottom = "0";
    moreMenu.setAttribute('data-menuShowing', "y");
    previewBox.setAttribute('data-labelShowing', "n");
    labelToggle();
  } else {
    moreBtn.innerHTML = '<i class="fa-solid fa-ellipsis-vertical"></i>'
    moreMenu.style.opacity = "0";
    moreMenu.style.zIndex = "-10";
    moreMenu.style.paddingBottom = "30px";
    moreMenu.setAttribute('data-menuShowing', "n");
    previewBox.setAttribute('data-labelShowing', "y");
    labelToggle();
  }
}

var lpLabel = document.getElementById('lpLabel');

function labelToggle() {
  if (previewBox.getAttribute('data-labelShowing') == "n") {
    lpLabel.classList.add('labelHide');
  } else {
    lpLabel.classList.remove('labelHide');
  }
}

// 'Swap' animation for Large Preview

allAlts.forEach(alt => {
  alt.onmousedown = function () {
    previewBox.style.backgroundSize = "150px";
    previewBox.style.backgroundPositionY = "calc(50% + 250px)";
  }

  alt.onmouseup = function () {
    previewBox.style.backgroundSize = "256px";
    previewBox.style.backgroundPosition = "50%";
  }
});